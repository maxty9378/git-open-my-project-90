!function(){"use strict";const e={baseUrl:"https://charming-salmiakki-34396f.netlify.app",containerId:"sns-welcome-widget",background:"#111827",loadingTimeout:1e4};function t(){const t=`.sns-tilda-widget-container{position:fixed!important;top:0!important;left:0!important;right:0!important;bottom:0!important;width:100vw!important;height:100vh!important;height:100dvh!important;margin:0!important;padding:0!important;background:${e.background}!important;overflow:hidden!important;z-index:999999!important;display:flex!important;flex-direction:column!important;box-sizing:border-box!important}.sns-tilda-widget-content{flex:1!important;width:100%!important;height:100%!important;background:${e.background}!important;display:block!important;position:relative!important;overflow:hidden!important;box-sizing:border-box!important}.sns-tilda-widget-loading{position:absolute!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;color:#02a374!important;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif!important;font-size:16px!important;z-index:10!important;text-align:center!important;background:${e.background}!important;padding:20px!important;border-radius:8px!important}.sns-tilda-widget-spinner{border:2px solid #374151!important;border-top:2px solid #02a374!important;border-radius:50%!important;width:30px!important;height:30px!important;animation:sns-tilda-spin 1s linear infinite!important;margin:0 auto 10px!important}@keyframes sns-tilda-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.sns-tilda-widget-close{position:absolute!important;top:20px!important;right:20px!important;width:40px!important;height:40px!important;background:rgba(0,0,0,.5)!important;border:none!important;border-radius:50%!important;color:white!important;font-size:20px!important;cursor:pointer!important;z-index:1000!important;display:flex!important;align-items:center!important;justify-content:center!important;transition:background-color .2s ease!important}.sns-tilda-widget-close:hover{background:rgba(0,0,0,.7)!important}body.sns-tilda-widget-active>*:not(.sns-tilda-widget-container){display:none!important;visibility:hidden!important}body.sns-tilda-widget-active{margin:0!important;padding:0!important;overflow:hidden!important;height:100vh!important;height:100dvh!important;max-height:100vh!important;max-height:100dvh!important;position:fixed!important;width:100%!important;top:0!important;left:0!important}html.sns-tilda-widget-active{height:100%!important;height:100dvh!important;max-height:none!important;overflow:hidden!important;position:fixed!important;width:100%!important}@supports (-webkit-touch-callout:none){.sns-tilda-widget-container{height:100vh!important;height:-webkit-fill-available!important}.sns-tilda-widget-content{height:100%!important;height:-webkit-fill-available!important}body.sns-tilda-widget-active{height:100vh!important;height:-webkit-fill-available!important}html.sns-tilda-widget-active{height:100vh!important;height:-webkit-fill-available!important}}.sns-tilda-widget-container.loading{opacity:0;transition:opacity .3s ease}.sns-tilda-widget-container.loaded{opacity:1}`,n=document.createElement("style");n.textContent=t,n.id="sns-tilda-widget-styles",document.head.appendChild(n)}function n(){return'<div class="sns-tilda-widget-container loading"><button class="sns-tilda-widget-close" onclick="SNSTildaWidget.close()" title="Закрыть">×</button><div class="sns-tilda-widget-loading"><div class="sns-tilda-widget-spinner"></div><div>Загрузка Welcome курса...</div></div><div class="sns-tilda-widget-content" id="sns-tilda-widget-content"></div></div>'}function i(){let t=document.querySelector('meta[name="viewport"]');t||(t=document.createElement("meta"),t.name="viewport",document.head.appendChild(t)),window.SNSTildaWidget._originalViewport=t.content,t.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, interactive-widget=resizes-content"}function o(){document.documentElement.classList.add("sns-tilda-widget-active"),document.body.classList.add("sns-tilda-widget-active");const e=document.body.style.overflow,t=document.documentElement.style.overflow,n=document.body.style.position;document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%",document.body.style.top="0",document.body.style.left="0",window.SNSTildaWidget._originalStyles={bodyOverflow:e,htmlOverflow:t,bodyPosition:n},i()}function a(){document.documentElement.classList.remove("sns-tilda-widget-active"),document.body.classList.remove("sns-tilda-widget-active"),window.SNSTildaWidget._originalStyles&&(document.body.style.overflow=window.SNSTildaWidget._originalStyles.bodyOverflow||"",document.documentElement.style.overflow=window.SNSTildaWidget._originalStyles.htmlOverflow||"",document.body.style.position=window.SNSTildaWidget._originalStyles.bodyPosition||"",document.body.style.width="",document.body.style.height="",document.body.style.top="",document.body.style.left=""),window.SNSTildaWidget._originalViewport&&(document.querySelector('meta[name="viewport"]')?.content=window.SNSTildaWidget._originalViewport)}async function l(t){const n=t.querySelector(".sns-tilda-widget-loading"),i=t.querySelector(".sns-tilda-widget-content"),o=t.querySelector(".sns-tilda-widget-container");function a(){n&&(n.style.display="none"),o&&(o.classList.remove("loading"),o.classList.add("loaded")),console.log("Загрузка завершена")}console.log("Загрузка контента приложения...");try{n&&(n.style.display="block");const t=document.createElement("iframe");t.src=e.baseUrl,t.style.cssText=`width: 100% !important;height: 100% !important;border: none !important;background: ${e.background} !important;display: block !important;`,t.title="SNS Welcome Course",t.allowFullscreen=!0,t.setAttribute("allow","accelerometer; autoplay; camera; clipboard-read; clipboard-write; encrypted-media; fullscreen; geolocation; gyroscope; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; web-share; xr-spatial-tracking"),t.setAttribute("sandbox","allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-presentation allow-same-origin allow-scripts allow-top-navigation allow-top-navigation-by-user-activation"),t.loading="eager",t.referrerPolicy="strict-origin-when-cross-origin",t.onload=()=>{console.log("Приложение загружено успешно"),a()},t.onerror=()=>{console.error("Ошибка загрузки приложения"),a()},i.appendChild(t)}catch(e){console.error("Ошибка загрузки контента:",e),a()}setTimeout(a,e.loadingTimeout)}class s{constructor(){this.initialized=!1,this.container=null}async init(){if(this.initialized)return void console.log("Виджет уже инициализирован");console.log("Инициализация виджета для Tilda..."),this.container=document.getElementById(e.containerId),this.container?((()=>{try{t(),o(),this.container.innerHTML=n(),l(this.container),this.setupEventListeners(),this.initialized=!0,console.log("Виджет успешно инициализирован")}catch(e){console.error("Ошибка инициализации виджета:",e)}})(),,this.initialized=!0,console.log("Виджет успешно инициализирован")):console.error(`Контейнер с ID "${e.containerId}" не найден`)}setupEventListeners(){this.container&&this.container.addEventListener("click",(e=>{e.stopPropagation()})),window.addEventListener("orientationchange",(()=>{setTimeout((()=>{this.adjustForOrientation()}),100)})),window.addEventListener("resize",(()=>{this.adjustForOrientation()})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.initialized&&this.close()}))}adjustForOrientation(){if(!this.container)return;const e=this.container.querySelector(".sns-tilda-widget-container"),t=this.container.querySelector(".sns-tilda-widget-content");e&&t&&(e.style.height="100vh",e.style.height="100dvh",t.style.height="100%",console.log("Виджет адаптирован под новую ориентацию"))}close(){this.initialized&&(console.log("Закрытие виджета..."),a(),this.container&&(this.container.innerHTML=""),document.getElementById("sns-tilda-widget-styles")?.remove(),this.initialized=!1,console.log("Виджет закрыт"))}}!function(){const t=new s;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>t.init())):t.init(),window.SNSTildaWidget={init:()=>t.init(),close:()=>t.close(),config:e,widget:t}}()}();